<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ” í•¨ìˆ˜ ê²€ì¦ ì‹œìŠ¤í…œ</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1a1a1a;
            color: #0f0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: #0f0;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 10px;
            margin-bottom: 30px;
        }
        .function-test {
            background: #000;
            border: 1px solid #0f0;
            padding: 10px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .function-name {
            color: #0ff;
            font-size: 12px;
        }
        .status {
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: bold;
        }
        .status.success {
            background: #0f0;
            color: #000;
        }
        .status.error {
            background: #f00;
            color: #fff;
        }
        .summary {
            background: #000;
            border: 2px solid #0f0;
            padding: 20px;
            border-radius: 5px;
            text-align: center;
            margin-bottom: 30px;
        }
        .summary-stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin-top: 20px;
        }
        .stat {
            font-size: 24px;
        }
        .stat.success { color: #0f0; }
        .stat.error { color: #f00; }
        button {
            background: #0f0;
            color: #000;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-weight: bold;
            margin: 5px;
        }
        button:hover {
            background: #0ff;
        }
        .console {
            background: #000;
            border: 1px solid #0f0;
            padding: 10px;
            height: 200px;
            overflow-y: auto;
            font-size: 12px;
            margin-top: 20px;
        }
        .console-line {
            margin: 2px 0;
        }
        .console-error {
            color: #f00;
        }
        .console-success {
            color: #0f0;
        }
        .console-info {
            color: #0ff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>âš¡ MBTI ìš´ì„¸ ì•± - í•¨ìˆ˜ ê²€ì¦ ì‹œìŠ¤í…œ</h1>
        
        <div class="summary">
            <h2>ê²€ì¦ ê²°ê³¼</h2>
            <div class="summary-stats">
                <div>
                    <div class="stat success" id="successCount">0</div>
                    <div>ì •ìƒ</div>
                </div>
                <div>
                    <div class="stat error" id="errorCount">0</div>
                    <div>ì˜¤ë¥˜</div>
                </div>
                <div>
                    <div class="stat" id="totalCount">0</div>
                    <div>ì „ì²´</div>
                </div>
            </div>
            <div style="margin-top: 20px;">
                <button onclick="validateAll()">ğŸ” ì „ì²´ ê²€ì¦</button>
                <button onclick="testAllFunctions()">â–¶ï¸ ëª¨ë“  í•¨ìˆ˜ ì‹¤í–‰</button>
                <button onclick="clearConsole()">ğŸ—‘ï¸ ì½˜ì†” ì´ˆê¸°í™”</button>
            </div>
        </div>
        
        <h3>í•¨ìˆ˜ ìƒíƒœ</h3>
        <div class="test-grid" id="functionGrid"></div>
        
        <h3>ì‹¤ì‹œê°„ ì½˜ì†”</h3>
        <div class="console" id="console"></div>
    </div>
    
    <script>
        // ê²€ì¦í•  ëª¨ë“  í•¨ìˆ˜ ëª©ë¡
        const functions = [
            'startMagicalJourney',
            'showMBTISelect',
            'showQuickSelect',
            'goBack',
            'submitName',
            'selectMBTI',
            'selectAnswer',
            'skipQuestion',
            'startTest',
            'restart',
            'shareResult',
            'shareKakao',
            'toggleCategory',
            'showPremium',
            'closePremium',
            'buyPremium',
            'giftPremium',
            'openFeedback',
            'copyInviteCode',
            'shareKakaoInvite',
            'shareLinkInvite',
            'showTerms',
            'showPrivacy',
            'showContact'
        ];
        
        let results = { success: 0, error: 0 };
        
        function log(message, type = 'info') {
            const console = document.getElementById('console');
            const line = document.createElement('div');
            line.className = `console-line console-${type}`;
            const timestamp = new Date().toLocaleTimeString();
            line.textContent = `[${timestamp}] ${message}`;
            console.appendChild(line);
            console.scrollTop = console.scrollHeight;
        }
        
        function validateAll() {
            results = { success: 0, error: 0 };
            const grid = document.getElementById('functionGrid');
            grid.innerHTML = '';
            
            log('========== í•¨ìˆ˜ ê²€ì¦ ì‹œì‘ ==========', 'info');
            
            // iframeìœ¼ë¡œ ì•± ë¡œë“œ
            const iframe = document.createElement('iframe');
            iframe.src = '/index.html';
            iframe.style.display = 'none';
            document.body.appendChild(iframe);
            
            iframe.onload = () => {
                const win = iframe.contentWindow;
                
                functions.forEach(funcName => {
                    const item = document.createElement('div');
                    item.className = 'function-test';
                    
                    const name = document.createElement('span');
                    name.className = 'function-name';
                    name.textContent = funcName;
                    
                    const status = document.createElement('span');
                    status.className = 'status';
                    
                    if (typeof win[funcName] === 'function') {
                        status.className += ' success';
                        status.textContent = 'OK';
                        results.success++;
                        log(`âœ… ${funcName} - ì •ì˜ë¨`, 'success');
                    } else {
                        status.className += ' error';
                        status.textContent = 'MISSING';
                        results.error++;
                        log(`âŒ ${funcName} - ì •ì˜ë˜ì§€ ì•ŠìŒ!`, 'error');
                    }
                    
                    item.appendChild(name);
                    item.appendChild(status);
                    grid.appendChild(item);
                });
                
                // ê²°ê³¼ ì—…ë°ì´íŠ¸
                document.getElementById('successCount').textContent = results.success;
                document.getElementById('errorCount').textContent = results.error;
                document.getElementById('totalCount').textContent = functions.length;
                
                log(`========== ê²€ì¦ ì™„ë£Œ: ${results.success}/${functions.length} ==========`, 
                    results.error === 0 ? 'success' : 'error');
                
                // iframe ì œê±°
                document.body.removeChild(iframe);
            };
        }
        
        function testAllFunctions() {
            log('========== í•¨ìˆ˜ ì‹¤í–‰ í…ŒìŠ¤íŠ¸ ==========', 'info');
            
            const iframe = document.createElement('iframe');
            iframe.src = '/index.html';
            iframe.style.display = 'none';
            document.body.appendChild(iframe);
            
            iframe.onload = () => {
                const win = iframe.contentWindow;
                
                functions.forEach(funcName => {
                    if (typeof win[funcName] === 'function') {
                        try {
                            // í•¨ìˆ˜ ì‹¤í–‰ (ì¸ìê°€ í•„ìš”í•œ í•¨ìˆ˜ë“¤ ì²˜ë¦¬)
                            if (funcName === 'selectMBTI') {
                                win[funcName]('INTJ');
                            } else if (funcName === 'selectAnswer') {
                                win[funcName]('E');
                            } else if (funcName === 'toggleCategory') {
                                // ì¹´í…Œê³ ë¦¬ í† ê¸€ì€ ì¸ì í•„ìš”
                                return;
                            } else {
                                win[funcName]();
                            }
                            log(`â–¶ï¸ ${funcName}() ì‹¤í–‰ ì„±ê³µ`, 'success');
                        } catch (e) {
                            log(`âš ï¸ ${funcName}() ì‹¤í–‰ ì˜¤ë¥˜: ${e.message}`, 'error');
                        }
                    }
                });
                
                setTimeout(() => {
                    document.body.removeChild(iframe);
                    log('========== ì‹¤í–‰ í…ŒìŠ¤íŠ¸ ì™„ë£Œ ==========', 'info');
                }, 2000);
            };
        }
        
        function clearConsole() {
            document.getElementById('console').innerHTML = '';
            log('ì½˜ì†” ì´ˆê¸°í™”ë¨', 'info');
        }
        
        // í˜ì´ì§€ ë¡œë“œì‹œ ìë™ ê²€ì¦
        window.onload = () => {
            log('ê²€ì¦ ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ', 'success');
            setTimeout(validateAll, 500);
        };
    </script>
</body>
</html>