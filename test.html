<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI ìš´ì„¸ í…ŒìŠ¤íŠ¸</title>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N1BD4K7BV9"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-N1BD4K7BV9');
    </script>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-button {
            padding: 10px 20px;
            margin: 5px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }
        .test-button:hover {
            background: #5a67d8;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            background: #f7fafc;
            border-radius: 4px;
        }
        .success { color: green; }
        .error { color: red; }
        .warning { color: orange; }
    </style>
</head>
<body>
    <h1>ğŸ§ª MBTI ìš´ì„¸ ì•± ìë™ í…ŒìŠ¤íŠ¸</h1>
    
    <div class="test-section">
        <h2>1. ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸</h2>
        <button class="test-button" onclick="testInitialization()">ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <div id="init-result" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>2. í™”ë©´ ì „í™˜ í…ŒìŠ¤íŠ¸</h2>
        <button class="test-button" onclick="testScreenTransitions()">í™”ë©´ ì „í™˜ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <div id="screen-result" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>3. MBTI ì„ íƒ í”Œë¡œìš° í…ŒìŠ¤íŠ¸</h2>
        <button class="test-button" onclick="testMBTIFlow()">MBTI í”Œë¡œìš° í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <div id="mbti-result" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>4. ì„±ëŠ¥ ì¸¡ì •</h2>
        <button class="test-button" onclick="testPerformance()">ì„±ëŠ¥ ì¸¡ì • ì‹¤í–‰</button>
        <div id="perf-result" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>5. ê´‘ê³  ë¡œë”© í…ŒìŠ¤íŠ¸</h2>
        <button class="test-button" onclick="testAdLoading()">ê´‘ê³  ë¡œë”© í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <div id="ad-result" class="result"></div>
    </div>
    
    <div class="test-section">
        <h2>6. ì „ì²´ í†µí•© í…ŒìŠ¤íŠ¸</h2>
        <button class="test-button" onclick="runAllTests()">ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <div id="all-result" class="result"></div>
    </div>

    <script>
        // í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°
        function log(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            const typeClass = type === 'error' ? 'error' : type === 'success' ? 'success' : '';
            element.innerHTML += `<div class="${typeClass}">${new Date().toLocaleTimeString()} - ${message}</div>`;
        }
        
        // 1. ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸
        async function testInitialization() {
            const resultId = 'init-result';
            document.getElementById(resultId).innerHTML = '';
            
            try {
                // ì•± í˜ì´ì§€ ì—´ê¸°
                const win = window.open('/index.html', '_blank');
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // ì „ì—­ ê°ì²´ í™•ì¸
                if (win.CONFIG) {
                    log(resultId, 'âœ… CONFIG ê°ì²´ ë¡œë“œ ì„±ê³µ', 'success');
                } else {
                    log(resultId, 'âŒ CONFIG ê°ì²´ ë¡œë“œ ì‹¤íŒ¨', 'error');
                }
                
                // ì„±ëŠ¥ ìµœì í™” ëª¨ë“ˆ í™•ì¸
                if (win.PerformanceOptimizer) {
                    log(resultId, 'âœ… ì„±ëŠ¥ ìµœì í™” ëª¨ë“ˆ ë¡œë“œ ì„±ê³µ', 'success');
                } else {
                    log(resultId, 'âŒ ì„±ëŠ¥ ìµœì í™” ëª¨ë“ˆ ë¡œë“œ ì‹¤íŒ¨', 'error');
                }
                
                // í™”ë©´ ìš”ì†Œ í™•ì¸
                const screens = win.document.querySelectorAll('.screen');
                log(resultId, `í™”ë©´ ìˆ˜: ${screens.length}ê°œ`);
                
                win.close();
                log(resultId, 'âœ… ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸ ì™„ë£Œ', 'success');
            } catch (error) {
                log(resultId, `âŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }
        
        // 2. í™”ë©´ ì „í™˜ í…ŒìŠ¤íŠ¸
        async function testScreenTransitions() {
            const resultId = 'screen-result';
            document.getElementById(resultId).innerHTML = '';
            
            try {
                const win = window.open('/index.html', '_blank');
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // ì‹œì‘ í™”ë©´ í™•ì¸
                const startScreen = win.document.getElementById('startScreen');
                if (startScreen && startScreen.classList.contains('active')) {
                    log(resultId, 'âœ… ì‹œì‘ í™”ë©´ í™œì„±í™” í™•ì¸', 'success');
                }
                
                // Magic ë²„íŠ¼ í´ë¦­
                const magicBtn = win.document.querySelector('.magic-button');
                if (magicBtn) {
                    magicBtn.click();
                    await new Promise(resolve => setTimeout(resolve, 500));
                    log(resultId, 'âœ… Magic ë²„íŠ¼ í´ë¦­ ì„±ê³µ', 'success');
                }
                
                // ìŠ¤í¬ë¡¤ ë°©ì§€ í™•ì¸
                win.scrollTo(0, 100);
                await new Promise(resolve => setTimeout(resolve, 100));
                if (win.scrollY === 0) {
                    log(resultId, 'âœ… ìŠ¤í¬ë¡¤ ë°©ì§€ ì‘ë™ í™•ì¸', 'success');
                } else {
                    log(resultId, 'âš ï¸ ìŠ¤í¬ë¡¤ ë°©ì§€ ë¯¸ì‘ë™', 'warning');
                }
                
                win.close();
                log(resultId, 'âœ… í™”ë©´ ì „í™˜ í…ŒìŠ¤íŠ¸ ì™„ë£Œ', 'success');
            } catch (error) {
                log(resultId, `âŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }
        
        // 3. MBTI í”Œë¡œìš° í…ŒìŠ¤íŠ¸
        async function testMBTIFlow() {
            const resultId = 'mbti-result';
            document.getElementById(resultId).innerHTML = '';
            
            try {
                const win = window.open('/index.html', '_blank');
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // MBTI ì•Œê³  ìˆìŒ ì„ íƒ
                win.document.querySelector('.magic-button').click();
                await new Promise(resolve => setTimeout(resolve, 500));
                
                const knowCheckbox = win.document.getElementById('knowMBTI');
                if (knowCheckbox) {
                    knowCheckbox.checked = true;
                    knowCheckbox.onchange();
                    log(resultId, 'âœ… MBTI ì•Œê³  ìˆìŒ ì„ íƒ', 'success');
                }
                
                // MBTI ì„ íƒ
                const mbtiSelect = win.document.getElementById('mbtiSelect');
                if (mbtiSelect && mbtiSelect.style.display !== 'none') {
                    mbtiSelect.value = 'INTJ';
                    log(resultId, 'âœ… MBTI ì„ íƒ UI í‘œì‹œ', 'success');
                }
                
                // ì‹œì‘ ë²„íŠ¼ í´ë¦­
                const startBtn = win.document.getElementById('startJourneyBtn');
                if (startBtn && !startBtn.disabled) {
                    log(resultId, 'âœ… ì‹œì‘ ë²„íŠ¼ í™œì„±í™” í™•ì¸', 'success');
                }
                
                win.close();
                log(resultId, 'âœ… MBTI í”Œë¡œìš° í…ŒìŠ¤íŠ¸ ì™„ë£Œ', 'success');
            } catch (error) {
                log(resultId, `âŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }
        
        // 4. ì„±ëŠ¥ ì¸¡ì •
        async function testPerformance() {
            const resultId = 'perf-result';
            document.getElementById(resultId).innerHTML = '';
            
            try {
                const win = window.open('/index.html', '_blank');
                await new Promise(resolve => setTimeout(resolve, 3000));
                
                // ì„±ëŠ¥ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
                if (win.PerformanceOptimizer) {
                    const metrics = win.PerformanceOptimizer.measurePerformance();
                    if (metrics) {
                        log(resultId, `í˜ì´ì§€ ë¡œë“œ ì‹œê°„: ${metrics.pageLoadTime}ms`);
                        log(resultId, `DOM ì¤€ë¹„ ì‹œê°„: ${metrics.domReadyTime}ms`);
                        log(resultId, `TTFB: ${metrics.ttfb}ms`);
                        
                        if (metrics.pageLoadTime < 3000) {
                            log(resultId, 'âœ… ì„±ëŠ¥ ëª©í‘œ ë‹¬ì„± (3ì´ˆ ì´ë‚´)', 'success');
                        } else {
                            log(resultId, 'âš ï¸ ì„±ëŠ¥ ìµœì í™” í•„ìš”', 'warning');
                        }
                    }
                }
                
                // ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
                if (win.performance && win.performance.memory) {
                    const memory = win.performance.memory;
                    log(resultId, `ë©”ëª¨ë¦¬ ì‚¬ìš©: ${Math.round(memory.usedJSHeapSize / 1048576)}MB`);
                }
                
                win.close();
                log(resultId, 'âœ… ì„±ëŠ¥ ì¸¡ì • ì™„ë£Œ', 'success');
            } catch (error) {
                log(resultId, `âŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }
        
        // 5. ê´‘ê³  ë¡œë”© í…ŒìŠ¤íŠ¸
        async function testAdLoading() {
            const resultId = 'ad-result';
            document.getElementById(resultId).innerHTML = '';
            
            try {
                const win = window.open('/index.html', '_blank');
                await new Promise(resolve => setTimeout(resolve, 3000));
                
                // adsbykakao ê°ì²´ í™•ì¸
                if (win.adsbykakao) {
                    log(resultId, 'âœ… adsbykakao ê°ì²´ ë¡œë“œ ì„±ê³µ', 'success');
                } else {
                    log(resultId, 'âš ï¸ adsbykakao ê°ì²´ ë¯¸ë¡œë“œ (ê´‘ê³  ì°¨ë‹¨ê¸° ê°€ëŠ¥ì„±)', 'warning');
                }
                
                // ê´‘ê³  ì»¨í…Œì´ë„ˆ í™•ì¸
                const adContainers = win.document.querySelectorAll('.kakao_ad_area');
                log(resultId, `ê´‘ê³  ì»¨í…Œì´ë„ˆ ìˆ˜: ${adContainers.length}ê°œ`);
                
                adContainers.forEach((container, index) => {
                    if (container.children.length > 0) {
                        log(resultId, `âœ… ê´‘ê³  ì˜ì—­ ${index + 1} ë Œë”ë§ í™•ì¸`, 'success');
                    } else {
                        log(resultId, `âš ï¸ ê´‘ê³  ì˜ì—­ ${index + 1} ë¹„ì–´ìˆìŒ`, 'warning');
                    }
                });
                
                win.close();
                log(resultId, 'âœ… ê´‘ê³  ë¡œë”© í…ŒìŠ¤íŠ¸ ì™„ë£Œ', 'success');
            } catch (error) {
                log(resultId, `âŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'error');
            }
        }
        
        // 6. ì „ì²´ í†µí•© í…ŒìŠ¤íŠ¸
        async function runAllTests() {
            const resultId = 'all-result';
            document.getElementById(resultId).innerHTML = '';
            log(resultId, 'ğŸš€ ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹œì‘...');
            
            await testInitialization();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            await testScreenTransitions();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            await testMBTIFlow();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            await testPerformance();
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            await testAdLoading();
            
            log(resultId, 'âœ… ì „ì²´ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!', 'success');
        }
    </script>
</body>
</html>